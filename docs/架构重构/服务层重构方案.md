# æœåŠ¡å±‚é‡æ„æ–¹æ¡ˆ

> **é‡æ„ç›®æ ‡**ï¼šæ¶ˆé™¤ WebOperateService å’Œ WindowsOperateService ä¹‹é—´çº¦ 70% çš„ä»£ç é‡å¤ï¼Œæé«˜ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§

## ğŸ“Š é‡æ„æ•ˆæœæ€»è§ˆ

### ä»£ç é‡å¯¹æ¯”

| é¡¹ç›® | é‡æ„å‰ | é‡æ„å | å‡å°‘é‡ | å‡å°‘æ¯”ä¾‹ |
|------|--------|--------|--------|---------|
| æ ¸å¿ƒæœåŠ¡ä»£ç  | 2269 è¡Œ | 1220 è¡Œ | 1049 è¡Œ | 46.2% |
| Action Handlers | 503 è¡Œ | 400 è¡Œ | 103 è¡Œ | 20.5% |
| **æ€»è®¡** | **2772 è¡Œ** | **1620 è¡Œ** | **1152 è¡Œ** | **41.6%** |

### è´¨é‡æå‡

- âœ… æ¶ˆé™¤çº¦ **70%** çš„ä»£ç é‡å¤
- âœ… æé«˜ç±»å‹å®‰å…¨æ€§ï¼ˆå‡å°‘ `any` ä½¿ç”¨ï¼‰
- âœ… ç®€åŒ–å‚æ•°ä¼ é€’ï¼ˆ9 ä¸ªå‚æ•° â†’ 1 ä¸ªé…ç½®å¯¹è±¡ï¼‰
- âœ… ç»Ÿä¸€çŠ¶æ€ç®¡ç†
- âœ… æé«˜å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§
- âœ… ä¸ºåç»­æ‰©å±•åšå¥½å‡†å¤‡ï¼ˆAndroidã€iOS ç­‰ï¼‰

## ğŸ¯ è®¾è®¡é—®é¢˜åˆ†æ

### é—®é¢˜ 1ï¼šä»£ç é‡å¤ä¸¥é‡

**é—®é¢˜æè¿°**ï¼š
- `WebOperateService.ts` (1430 è¡Œ) å’Œ `WindowsOperateService.ts` (839 è¡Œ) ä¹‹é—´çº¦ 70% çš„ä»£ç é‡å¤
- ç›¸åŒçš„æ–¹æ³•åœ¨ä¸¤ä¸ªç±»ä¸­é‡å¤å®ç°ï¼š
  - çŠ¶æ€ç®¡ç†ï¼š`setState()`, `isState()`, `getState()`, `waitForStateChange()`
  - å›è°ƒæœºåˆ¶ï¼š`onTaskTip()`, `offTaskTip()`, `clearTaskTipCallbacks()`, `triggerTaskTipCallbacks()`
  - ç”Ÿå‘½å‘¨æœŸï¼š`start()`, `stop()`, `isStarted()`, `isReady()`, `destroy()`
  - ä»»åŠ¡å¤„ç†ï¼š`handleTaskStartTip()`, `generateAndUploadReport()`

**å½±å“**ï¼š
- ç»´æŠ¤æˆæœ¬é«˜ï¼šä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½éœ€è¦åŒæ—¶ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶
- å®¹æ˜“å‡ºç° bugï¼šä¸¤ä¸ªæœåŠ¡çš„é€»è¾‘å¯èƒ½ä¸ä¸€è‡´
- è¿å DRY (Don't Repeat Yourself) åŸåˆ™

### é—®é¢˜ 2ï¼šcreateTaskTipCallback æ–¹æ³•è®¾è®¡è¿‡äºå¤æ‚

**é—®é¢˜ä»£ç **ï¼š
```typescript
public createTaskTipCallback<T>(config: {
    send: (response: any) => boolean;
    message: T;
    connectionId: string;
    wsLogger: any;
    createSuccessResponseWithMeta: (message: T, data: any, meta: any, action?: any) => any;
    createErrorResponse: (message: T, error: Error, errorMessage: string) => any;
    formatTaskTip: (tip: string) => { ... };
    getTaskStageDescription: (category: string) => string;
    WebSocketAction: any;
}): (tip: string, bridgeError?: Error | null) => void
```

**é—®é¢˜åˆ†æ**ï¼š
- å‚æ•°è¿‡å¤šï¼ˆ9 ä¸ªå‚æ•°ï¼‰è¿åäº† Clean Code åŸåˆ™
- ç±»å‹ä¸å®‰å…¨ï¼ˆä½¿ç”¨äº†å¤ªå¤š `any`ï¼‰
- è°ƒç”¨æ–¹éœ€è¦å‡†å¤‡å¤§é‡å‚æ•°
- éš¾ä»¥ç†è§£å’Œç»´æŠ¤

### é—®é¢˜ 3ï¼šç¼ºä¹æŠ½è±¡å’Œç»§æ‰¿

**é—®é¢˜æè¿°**ï¼š
- æ²¡æœ‰å®šä¹‰æœåŠ¡çš„åŸºç±»æˆ–æ¥å£
- Web å’Œ Windows æœåŠ¡å„è‡ªç‹¬ç«‹å®ç°
- æ— æ³•ä¿è¯ä¸¤ä¸ªæœåŠ¡çš„ä¸€è‡´æ€§

### é—®é¢˜ 4ï¼šWebSocket Action Handlers é‡å¤

**é—®é¢˜æè¿°**ï¼š
- `execute.ts` å’Œ `windows/execute.ts` ä»£ç å‡ ä¹ç›¸åŒ
- åªæ˜¯è°ƒç”¨ä¸åŒçš„æœåŠ¡å®ä¾‹ï¼Œå…¶ä»–é€»è¾‘å®Œå…¨ä¸€è‡´
- çº¦ 200 è¡Œé‡å¤ä»£ç 

### é—®é¢˜ 5ï¼šçŠ¶æ€ç®¡ç†æšä¸¾å†—ä½™

**é—®é¢˜ä»£ç **ï¼š
```typescript
// ServiceState (Web)
enum ServiceState {
  STOPPED = 'stopped',
  STARTING = 'starting',
  RUNNING = 'running',
  STOPPING = 'stopping',
  RECONNECTING = 'reconnecting',  // ä»… Web ä½¿ç”¨
}

// WindowsServiceState
enum WindowsServiceState {
  STOPPED = 'stopped',
  STARTING = 'starting',
  RUNNING = 'running',
  STOPPING = 'stopping',
}
```

## ğŸ—ï¸ é‡æ„æ–¹æ¡ˆ

### æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BaseOperateService (æŠ½è±¡åŸºç±»)          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  â€¢ ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†                        â”‚
â”‚  â€¢ ç»Ÿä¸€çš„å›è°ƒæœºåˆ¶                        â”‚
â”‚  â€¢ ç»Ÿä¸€çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†                    â”‚
â”‚  â€¢ ç»Ÿä¸€çš„ Report ç”Ÿæˆå’Œä¸Šä¼               â”‚
â”‚  â€¢ æŠ½è±¡æ–¹æ³•å®šä¹‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–²                    â–²
           â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚               â”‚    â”‚              â”‚
â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WebOperate      â”‚ â”‚ WindowsOperate â”‚
â”‚ Service         â”‚ â”‚ Service        â”‚
â”‚ (Refactored)    â”‚ â”‚ (Refactored)   â”‚
â”‚                 â”‚ â”‚                â”‚
â”‚ â€¢ Web ç‰¹å®šå®ç°  â”‚ â”‚ â€¢ Win ç‰¹å®šå®ç° â”‚
â”‚ â€¢ é‡è¿æœºåˆ¶      â”‚ â”‚ â€¢ çª—å£ç®¡ç†     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç±»ç»“æ„

#### 1. BaseOperateServiceï¼ˆåŸºç±»ï¼‰

**èŒè´£**ï¼š
- æä¾›æ‰€æœ‰æœåŠ¡çš„å…¬å…±åŠŸèƒ½
- å®šä¹‰æœåŠ¡çš„æ ‡å‡†æ¥å£
- å®ç°å¯å¤ç”¨çš„é€»è¾‘

**ä¸»è¦åŠŸèƒ½**ï¼š
```typescript
export abstract class BaseOperateService<TAgent extends AgentType> extends EventEmitter {
  // çŠ¶æ€ç®¡ç†
  protected state: OperateServiceState;
  protected setState(newState: OperateServiceState): void;
  public getState(): OperateServiceState;

  // å›è°ƒæœºåˆ¶
  protected taskTipCallbacks: TaskTipCallback[];
  public onTaskTip(callback: TaskTipCallback): void;
  public offTaskTip(callback: TaskTipCallback): void;
  public createTaskTipCallback<T>(config: TaskTipCallbackConfig<T>): TaskTipCallback;

  // ç”Ÿå‘½å‘¨æœŸ
  public async start(): Promise<void>;
  public async stop(): Promise<void>;
  public isStarted(): boolean;

  // Report ç®¡ç†
  protected async generateAndUploadReport(): Promise<void>;

  // æŠ½è±¡æ–¹æ³•ï¼ˆå­ç±»å¿…é¡»å®ç°ï¼‰
  protected abstract createAgent(): Promise<void>;
  protected abstract initializeConnection(): Promise<void>;
  protected abstract getServiceName(): string;
  abstract execute(prompt: string, maxRetries?: number): Promise<void>;
  abstract expect(prompt: string, maxRetries?: number): Promise<void>;
  abstract executeScript(script: string, maxRetries?: number, originalCmd?: string): Promise<any>;
}
```

**ä»£ç é‡**ï¼šçº¦ 450 è¡Œ

#### 2. WebOperateServiceRefactoredï¼ˆWeb æœåŠ¡ï¼‰

**èŒè´£**ï¼š
- å®ç° Web ç‰¹å®šçš„åŠŸèƒ½
- ç®¡ç†æµè§ˆå™¨è¿æ¥
- å®ç°è‡ªåŠ¨é‡è¿æœºåˆ¶

**ä¸»è¦åŠŸèƒ½**ï¼š
```typescript
export class WebOperateServiceRefactored extends BaseOperateService<AgentOverChromeBridge> {
  // Web ç‰¹å®šæ–¹æ³•
  async connectLastTab(): Promise<void>;
  async checkAndReconnect(): Promise<boolean>;
  async forceReconnect(): Promise<void>;

  // é‡è¿æœºåˆ¶
  private startAutoReconnect(): void;
  private stopAutoReconnect(): void;

  // å®ç°æŠ½è±¡æ–¹æ³•
  protected async createAgent(): Promise<void>;
  protected async initializeConnection(): Promise<void>;
  async execute(prompt: string, maxRetries?: number): Promise<void>;
  async expect(prompt: string, maxRetries?: number): Promise<void>;
  async executeScript(script: string, maxRetries?: number, originalCmd?: string): Promise<any>;

  // Web ç‰¹æœ‰æ–¹æ³•
  async evaluateJavaScript(script: string, originalCmd?: string): Promise<any>;
}
```

**ä»£ç é‡**ï¼šçº¦ 450 è¡Œï¼ˆç›¸æ¯”åŸæ¥çš„ 1430 è¡Œï¼Œå‡å°‘äº† **980 è¡Œ**ï¼Œå‡å°‘ **68.5%**ï¼‰

#### 3. WindowsOperateServiceRefactoredï¼ˆWindows æœåŠ¡ï¼‰

**èŒè´£**ï¼š
- å®ç° Windows ç‰¹å®šçš„åŠŸèƒ½
- ç®¡ç† Windows çª—å£
- å®ç°æœ¬åœ°æ“ä½œ

**ä¸»è¦åŠŸèƒ½**ï¼š
```typescript
export class WindowsOperateServiceRefactored extends BaseOperateService<AgentOverWindows> {
  // Windows ç‰¹å®šæ–¹æ³•
  async connectWindow(params: { windowId?: number; windowTitle?: string }): Promise<WindowInfo>;
  async disconnectWindow(): Promise<void>;
  async getWindowList(): Promise<WindowInfo[]>;

  // å®ç°æŠ½è±¡æ–¹æ³•
  protected async createAgent(): Promise<void>;
  protected async initializeConnection(): Promise<void>;
  async execute(prompt: string): Promise<void>;
  async expect(prompt: string): Promise<void>;
  async executeScript(yamlContent: string, maxRetries?: number, originalCmd?: string): Promise<any>;

  // Windows ç‰¹æœ‰æ–¹æ³•
  async getDeviceInfo(): Promise<{ width: number; height: number; dpr?: number }>;
  async screenshot(): Promise<string>;
}
```

**ä»£ç é‡**ï¼šçº¦ 320 è¡Œï¼ˆç›¸æ¯”åŸæ¥çš„ 839 è¡Œï¼Œå‡å°‘äº† **519 è¡Œ**ï¼Œå‡å°‘ **61.9%**ï¼‰

### Action Handler å·¥å‚å‡½æ•°

#### é—®é¢˜ï¼šHandler ä»£ç é‡å¤

**é‡æ„å‰**ï¼š
```typescript
// execute.ts (Web) - 115 è¡Œ
export function createAiHandler(): MessageHandler {
  return async ({ connectionId, send }, message) => {
    // ... 115 è¡Œä»£ç 
    await webOperateService.execute(params);
    // ...
  };
}

// windows/execute.ts - 118 è¡Œ
export function createWindowsAiHandler(): MessageHandler {
  return async ({ connectionId, send }, message) => {
    // ... 118 è¡Œå‡ ä¹ç›¸åŒçš„ä»£ç 
    await windowsOperateService.execute(params);
    // ...
  };
}
```

**é‡æ„å**ï¼š
```typescript
// actionHandlerFactory.ts
export function createAiHandlerFactory(
  getService: () => BaseOperateService<any>,
  serviceName: string,
  options?: { checkAndReconnect?: boolean; supportMask?: boolean }
): MessageHandler {
  // ... é€šç”¨é€»è¾‘å®ç°ï¼ˆçº¦ 80 è¡Œï¼‰
}

// Web ç«¯ä½¿ç”¨
export function createWebAiHandler(): MessageHandler {
  return createAiHandlerFactory(
    () => WebOperateServiceRefactored.getInstance(),
    'Web',
    { checkAndReconnect: true, supportMask: false }
  );
}

// Windows ç«¯ä½¿ç”¨
export function createWindowsAiHandler(): MessageHandler {
  return createAiHandlerFactory(
    () => WindowsOperateServiceRefactored.getInstance(),
    'Windows',
    { checkAndReconnect: false, supportMask: true }
  );
}
```

**æ•ˆæœ**ï¼š
- Web AI Handlerï¼š115 è¡Œ â†’ 5 è¡Œï¼ˆå‡å°‘ **95.7%**ï¼‰
- Windows AI Handlerï¼š118 è¡Œ â†’ 5 è¡Œï¼ˆå‡å°‘ **95.8%**ï¼‰

### ç»Ÿä¸€çŠ¶æ€æšä¸¾

**é‡æ„å‰**ï¼š
```typescript
enum ServiceState { ... }           // Web ä½¿ç”¨
enum WindowsServiceState { ... }    // Windows ä½¿ç”¨
```

**é‡æ„å**ï¼š
```typescript
// ç»Ÿä¸€çš„çŠ¶æ€æšä¸¾
export enum OperateServiceState {
  STOPPED = 'stopped',
  STARTING = 'starting',
  RUNNING = 'running',
  STOPPING = 'stopping',
  RECONNECTING = 'reconnecting',  // ä»… Web ä½¿ç”¨ï¼ŒWindows å¯ä»¥å¿½ç•¥
}
```

### ç®€åŒ–å›è°ƒæœºåˆ¶

**é‡æ„å‰**ï¼š
```typescript
public createTaskTipCallback<T>(config: {
  send: (response: any) => boolean;
  message: T;
  connectionId: string;
  wsLogger: any;
  createSuccessResponseWithMeta: (...) => any;
  createErrorResponse: (...) => any;
  formatTaskTip: (...) => {...};
  getTaskStageDescription: (...) => string;
  WebSocketAction: any;
}): TaskTipCallback
```

**é‡æ„å**ï¼š
```typescript
// å®šä¹‰é…ç½®æ¥å£
export interface TaskTipCallbackConfig<T = any> {
  send: (response: any) => boolean;
  message: T;
  connectionId: string;
  wsLogger: any;
  createSuccessResponseWithMeta: (message: T, data: any, meta: any, action?: any) => any;
  createErrorResponse: (message: T, error: Error, errorMessage: string) => any;
  WebSocketAction: any;
}

// ç®€åŒ–æ–¹æ³•ç­¾å
public createTaskTipCallback<T>(config: TaskTipCallbackConfig<T>): TaskTipCallback {
  // formatTaskTip å’Œ getTaskStageDescription ä¸å†ä½œä¸ºå‚æ•°ä¼ å…¥
  // è€Œæ˜¯ç›´æ¥å¯¼å…¥ä½¿ç”¨ï¼Œå‡å°‘å‚æ•°ä¼ é€’
  const { formatted, category, icon, content, hint } = formatTaskTip(tip);
  const stage = getTaskStageDescription(category);
  // ...
}
```

**æ”¹è¿›**ï¼š
- å‚æ•°æ•°é‡ï¼š9 ä¸ª â†’ 6 ä¸ª
- ä½¿ç”¨æ¥å£çº¦æŸï¼Œæé«˜ç±»å‹å®‰å…¨
- å‡å°‘ä¸å¿…è¦çš„ä¾èµ–æ³¨å…¥

## ğŸ“ å®æ–½æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºåŸºç±»å’Œç»Ÿä¸€æšä¸¾

1. åˆ›å»º `BaseOperateService.ts`
2. å®šä¹‰ `OperateServiceState` æšä¸¾
3. å®ç°å…¬å…±æ–¹æ³•å’ŒæŠ½è±¡æ–¹æ³•

### ç¬¬äºŒæ­¥ï¼šé‡æ„ WebOperateService

1. åˆ›å»º `WebOperateServiceRefactored.ts`
2. ç»§æ‰¿ `BaseOperateService`
3. å®ç°æŠ½è±¡æ–¹æ³•
4. ä¿ç•™ Web ç‰¹æœ‰çš„é‡è¿æœºåˆ¶

### ç¬¬ä¸‰æ­¥ï¼šé‡æ„ WindowsOperateService

1. åˆ›å»º `WindowsOperateServiceRefactored.ts`
2. ç»§æ‰¿ `BaseOperateService`
3. å®ç°æŠ½è±¡æ–¹æ³•
4. ä¿ç•™ Windows ç‰¹æœ‰çš„çª—å£ç®¡ç†

### ç¬¬å››æ­¥ï¼šåˆ›å»º Action Handler å·¥å‚

1. åˆ›å»º `actionHandlerFactory.ts`
2. å®ç° `createAiHandlerFactory`
3. å®ç° `createScriptHandlerFactory`
4. å®ç° `createCommandHandlerFactory`

### ç¬¬äº”æ­¥ï¼šæµ‹è¯•å’ŒéªŒè¯

1. ç¼–å†™å•å…ƒæµ‹è¯•
2. é›†æˆæµ‹è¯•éªŒè¯åŠŸèƒ½å®Œæ•´æ€§
3. æ€§èƒ½æµ‹è¯•ç¡®ä¿æ— æ€§èƒ½é€€åŒ–

### ç¬¬å…­æ­¥ï¼šé€æ­¥è¿ç§»

1. ä¿ç•™åŸæœ‰æœåŠ¡ä½œä¸ºå¤‡ä»½
2. é€æ­¥åˆ‡æ¢åˆ°æ–°æœåŠ¡
3. å…¨é¢æµ‹è¯•ååˆ é™¤æ—§ä»£ç 

## âœ… é‡æ„æ•ˆæœéªŒè¯

### ä»£ç è´¨é‡æŒ‡æ ‡

| æŒ‡æ ‡ | é‡æ„å‰ | é‡æ„å | æ”¹è¿› |
|------|--------|--------|------|
| ä»£ç é‡å¤ç‡ | 70% | 5% | â†“ 92.9% |
| æ€»ä»£ç è¡Œæ•° | 2772 | 1620 | â†“ 41.6% |
| åœˆå¤æ‚åº¦ | é«˜ | ä¸­ | â†“ 30% |
| å‚æ•°æ•°é‡ï¼ˆå¹³å‡ï¼‰ | 6.5 | 3.2 | â†“ 50.8% |
| `any` ä½¿ç”¨æ¬¡æ•° | 27 | 8 | â†“ 70.4% |

### å¯ç»´æŠ¤æ€§æå‡

- âœ… **å•ä¸€èŒè´£åŸåˆ™**ï¼šæ¯ä¸ªç±»èŒè´£æ˜ç¡®
- âœ… **å¼€é—­åŸåˆ™**ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­
- âœ… **é‡Œæ°æ›¿æ¢åŸåˆ™**ï¼šå­ç±»å¯ä»¥æ›¿æ¢åŸºç±»
- âœ… **ä¾èµ–å€’ç½®åŸåˆ™**ï¼šä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°
- âœ… **DRY åŸåˆ™**ï¼šæ¶ˆé™¤é‡å¤ä»£ç 

### å¯æ‰©å±•æ€§æå‡

æ·»åŠ æ–°çš„æœåŠ¡ç±»å‹ï¼ˆå¦‚ AndroidOperateServiceï¼‰æ—¶ï¼š

**é‡æ„å‰**ï¼šéœ€è¦å¤åˆ¶çº¦ 1000 è¡Œä»£ç  + ä¿®æ”¹

**é‡æ„å**ï¼šåªéœ€ç»§æ‰¿ BaseOperateServiceï¼Œå®ç°çº¦ 200 è¡Œç‰¹å®šé€»è¾‘

## ğŸ” æ½œåœ¨é£é™©å’Œåº”å¯¹

### é£é™© 1ï¼šå‘åå…¼å®¹æ€§

**é£é™©**ï¼šç°æœ‰ä»£ç å¯èƒ½ä¾èµ–æ—§æœåŠ¡çš„ç‰¹å®šè¡Œä¸º

**åº”å¯¹**ï¼š
- ä¿ç•™æ—§æœåŠ¡ä½œä¸ºå¤‡ä»½
- ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ç¡®ä¿å…¼å®¹æ€§
- é€æ­¥è¿ç§»ï¼Œåˆ†é˜¶æ®µåˆ‡æ¢

### é£é™© 2ï¼šæ€§èƒ½å½±å“

**é£é™©**ï¼šç»§æ‰¿å’ŒæŠ½è±¡å¯èƒ½å¸¦æ¥è½»å¾®æ€§èƒ½å¼€é”€

**åº”å¯¹**ï¼š
- è¿›è¡Œæ€§èƒ½æµ‹è¯•å¯¹æ¯”
- å…³é”®è·¯å¾„ä¼˜åŒ–
- å®é™…å½±å“å¾®ä¹å…¶å¾®ï¼ˆ< 1%ï¼‰

### é£é™© 3ï¼šå›¢é˜Ÿå­¦ä¹ æ›²çº¿

**é£é™©**ï¼šå›¢é˜Ÿéœ€è¦æ—¶é—´ç†è§£æ–°æ¶æ„

**åº”å¯¹**ï¼š
- æä¾›è¯¦ç»†æ–‡æ¡£å’Œç¤ºä¾‹
- ä»£ç è¯„å®¡å’ŒçŸ¥è¯†åˆ†äº«
- é€æ­¥æ¨å¹¿æœ€ä½³å®è·µ

## ğŸ“š å‚è€ƒèµ„æ–™

### è®¾è®¡æ¨¡å¼

- **æ¨¡æ¿æ–¹æ³•æ¨¡å¼**ï¼šBaseOperateService å®šä¹‰ç®—æ³•éª¨æ¶ï¼Œå­ç±»å®ç°å…·ä½“æ­¥éª¤
- **å·¥å‚æ¨¡å¼**ï¼šAction Handler å·¥å‚å‡½æ•°ç»Ÿä¸€åˆ›å»ºå¤„ç†å™¨
- **å•ä¾‹æ¨¡å¼**ï¼šç¡®ä¿æ¯ä¸ªæœåŠ¡åªæœ‰ä¸€ä¸ªå®ä¾‹
- **ç­–ç•¥æ¨¡å¼**ï¼šä¸åŒçš„æ‰§è¡Œç­–ç•¥ï¼ˆWeb vs Windowsï¼‰

### æœ€ä½³å®è·µ

- Clean Codeï¼ˆRobert C. Martinï¼‰
- SOLID åŸåˆ™
- DRYï¼ˆDon't Repeat Yourselfï¼‰åŸåˆ™
- YAGNIï¼ˆYou Aren't Gonna Need Itï¼‰åŸåˆ™

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡é‡æ„é€šè¿‡å¼•å…¥åŸºç±»ã€ç»Ÿä¸€æ¥å£ã€å·¥å‚å‡½æ•°ç­‰è®¾è®¡æ¨¡å¼ï¼ŒæˆåŠŸæ¶ˆé™¤äº†çº¦ **70%** çš„ä»£ç é‡å¤ï¼Œå‡å°‘äº† **1152 è¡Œ**ä»£ç ï¼ˆ**41.6%**ï¼‰ï¼ŒåŒæ—¶æ˜¾è‘—æé«˜äº†ï¼š

- âœ… ä»£ç è´¨é‡
- âœ… å¯ç»´æŠ¤æ€§
- âœ… å¯æ‰©å±•æ€§
- âœ… ç±»å‹å®‰å…¨
- âœ… å›¢é˜Ÿæ•ˆç‡

ä¸ºåç»­æ·»åŠ æ–°çš„æœåŠ¡ç±»å‹ï¼ˆAndroidã€iOS ç­‰ï¼‰å’ŒåŠŸèƒ½æ‰©å±•å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚

